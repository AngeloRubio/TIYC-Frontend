@keyframes fadeIn {
 from {
   opacity: 0;
   transform: translateY(20px);
 }
 to {
   opacity: 1;
   transform: translateY(0);
 }
}

.animate-fadeIn {
 animation: fadeIn 0.5s ease-out both;
}

.main-container {
 max-width: 90vw;
 margin: 2rem auto;
 min-height: calc(100vh - 8rem);
}

.preview-container {
 padding: 1.5rem;
 height: 100%;
 overflow: auto;
}

.preview-indicator {
 max-width: 1200px;
 margin: 0 auto;
}

.story-paragraph p {
 user-select: none;
 cursor: default;
}

.story-paragraph:hover {
 background-color: #f9fafb;
}

.chapter-section {
 margin-bottom: 3rem;
 animation: fadeInChapter 0.6s ease-out both;
 background: white;
 border-radius: 1rem;
 overflow: hidden;
 box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
 transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.chapter-section:nth-child(1) { animation-delay: 0.1s; }
.chapter-section:nth-child(2) { animation-delay: 0.2s; }
.chapter-section:nth-child(3) { animation-delay: 0.3s; }
.chapter-section:nth-child(4) { animation-delay: 0.4s; }
.chapter-section:nth-child(5) { animation-delay: 0.5s; }
.chapter-section:nth-child(6) { animation-delay: 0.6s; }

.chapter-section:hover {
 transform: translateY(-2px);
 box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

@keyframes fadeInChapter {
 from {
   opacity: 0;
   transform: translateY(20px);
 }
 to {
   opacity: 1;
   transform: translateY(0);
 }
}

.story-image-container {
 position: relative;
 overflow: hidden;
}

.story-image-container img {
 transition: all 0.3s ease-in-out;
 display: block;
 width: 100%;
}

.story-image-container:hover img {
 transform: scale(1.02);
}

.story-image-container .group:hover .opacity-0 {
 opacity: 1;
}

.story-image-container .group:hover .scale-90 {
 transform: scale(1);
}

.story-image-container .group:hover .bg-opacity-0 {
 background-color: rgba(0, 0, 0, 0.3);
}

.story-image-container button {
 backdrop-filter: blur(8px);
 transition: all 0.3s ease;
}

.story-image-container button:hover {
 transform: scale(1.1);
 box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.form-field {
 margin-bottom: 1.5rem;
}

.form-field label {
 color: #96572a;
 font-weight: 600;
 margin-bottom: 0.5rem;
 display: block;
}

.form-field input,
.form-field textarea,
.form-field select {
 width: 100%;
 padding: 0.75rem 1rem;
 border: 2px solid #e5e7eb;
 border-radius: 0.75rem;
 transition: all 0.3s ease;
 font-size: 0.875rem;
}

.form-field input:focus,
.form-field textarea:focus,
.form-field select:focus {
 outline: none;
 border-color: #96572a;
 box-shadow: 0 0 0 3px rgba(150, 87, 42, 0.1);
}

.form-field textarea {
 resize: vertical;
 min-height: 120px;
}

.pedagogical-buttons {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
 gap: 1rem;
}

.pedagogical-buttons button {
 padding: 1rem;
 border-radius: 0.75rem;
 min-height: 90px;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 text-align: center;
 transition: all 0.2s ease-in-out;
 border: 2px solid transparent;
}

.pedagogical-buttons button:hover {
 transform: translateY(-2px);
 box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.pedagogical-buttons button.selected {
 border-color: #96572a;
}

.preview-state-centered {
 min-height: 400px;
 display: flex;
 align-items: center;
 justify-content: center;
 padding: 2rem;
}

.vertical-story-flow {
 max-width: 900px;
 margin: 0 auto;
}

.chapter-separator {
 text-align: center;
 margin: 3rem 0;
 position: relative;
}

.chapter-header {
 background: linear-gradient(135deg, #96572a, #8b4513);
 position: relative;
 overflow: hidden;
}

.chapter-header::before {
 content: '';
 position: absolute;
 top: 0;
 left: -100%;
 width: 100%;
 height: 100%;
 background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
 animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
 0% { left: -100%; }
 100% { left: 100%; }
}

.preview-scroll {
 max-height: calc(100vh - 300px);
 overflow-y: auto;
 scrollbar-width: thin;
 scrollbar-color: #96572a #f1f5f9;
}

.preview-scroll::-webkit-scrollbar {
 width: 8px;
}

.preview-scroll::-webkit-scrollbar-track {
 background: #f1f5f9;
 border-radius: 4px;
}

.preview-scroll::-webkit-scrollbar-thumb {
 background: #96572a;
 border-radius: 4px;
 border: 1px solid #f1f5f9;
}

.story-paragraph {
 background: linear-gradient(135deg, #f9fafb, #ffffff);
 transition: background-color 0.3s ease;
}

.preview-indicator .bg-yellow-50 {
 background-color: #fefce8;
 border-color: #facc15;
}

button:focus-visible {
 outline: 2px solid #96572a;
 outline-offset: 2px;
}

.story-image-container:focus-within {
 outline: 2px solid #96572a;
 outline-offset: 4px;
}

/* Responsive */
@media (min-width: 640px) {
 .main-container {
   max-width: 80vw;
 }
}

@media (min-width: 768px) {
 .main-container {
   max-width: 70vw;
 }
}

@media (min-width: 1024px) {
 .main-container {
   max-width: 60vw;
   margin: 1rem auto;
 }
 
 .preview-container {
   padding: 1rem;
 }
 
 .pedagogical-buttons {
   grid-template-columns: 1fr;
 }
 
 .chapter-section {
   margin-bottom: 2rem;
 }
 
 .story-image-container img {
   height: 250px;
   object-fit: cover;
 }
}

@media (min-width: 1280px) {
 .main-container {
   max-width: 50vw;
 }
}

@media (max-width: 768px) {
 .pedagogical-buttons button {
   min-height: 80px;
   padding: 0.75rem;
 }
 
 .preview-scroll {
   max-height: calc(100vh - 250px);
 }
 
 .form-field {
   margin-bottom: 1rem;
 }
 
 .chapter-section {
   margin-bottom: 1.5rem;
 }
 
 .story-paragraph {
   padding: 1rem;
 }
}

@media (max-width: 640px) {
 .main-container {
   margin: 0.5rem auto;
   max-width: calc(100vw - 1rem);
 }
 
 .preview-container {
   padding: 0.5rem;
 }
 
 .pedagogical-buttons {
   gap: 0.5rem;
 }
 
 .form-field input,
 .form-field textarea,
 .form-field select {
   padding: 0.5rem 0.75rem;
   font-size: 0.8rem;
 }
}

@media (prefers-reduced-motion: reduce) {
 .animate-fadeIn,
 .chapter-section,
 .story-image-container img,
 .chapter-header::before {
   animation: none !important;
   transition: none !important;
 }
 
 .chapter-section:hover {
   transform: none;
 }
 
 .story-image-container button:hover {
   transform: none;
 }
}